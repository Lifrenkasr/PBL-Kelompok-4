<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Profil</title>
    <link rel="stylesheet" type="text/css" href="static/css/styleedit_profile.css">
    <!-- ... (file css lainnya) ... -->
</head>
<body>
    <header>
        <div class="left" style="display: flex; align-items: center;">
            <img src="/static/css/Logo.png" 
            alt="Logo" style="height: 60px; width: 60px; margin-right: 10px;">
            <div>
                <h2 style="margin: 0; color: white;">Smart Door Lock Embedded Room</h2>
                <p style="margin: 0; color: white;">Door Lock With Face Recognition</p>
            </div>
        </div>
        <div class="right">
            <!-- Tampilkan informasi profil -->
            <div style="display: flex; align-items: center; margin-right: 10px;">
                <a href="{{ url_for('dashboard') }}" style="color: white; text-decoration: none;">Home |</a>
                <a href="{{ url_for('logout') }}" style="color: white; margin-left: 5px; text-decoration: none;">Log Out</a>
            </div>
            
        </div>
        <video class="video-bg" autoplay muted loop>
            <source src="/static/css/bg3.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
    </header>

    <div class="container">
        <!-- Bagian Kiri - Profile Account -->
        <div class="profile-container">
            <h2 style="text-align: center;">Profile Account</h2>
            <!-- Tampilkan foto profil dari database -->
            <img src="{{ url_for('uploaded_file', filename=user_data.profile_picture) }}" style="display: block; margin: 0 auto;">
        <!-- Tampilkan informasi profil dari database -->
            <p><strong>Nama    :</strong> {{ user_data.nama }}</p>
            <p><strong>Status  :</strong> {{ user_data.status }}</p>
            <p><strong>NIM/NIP :</strong> {{ user_data.nim_nip }}</p>
            <p><strong>Username:</strong> {{ user_data.username }}</p>
        </div>

       <!-- Bagian Kanan - Edited Profile Account -->
<div class="edit-container">
    <form method="POST" action="{{ url_for('edit_profile') }}" enctype="multipart/form-data">
                <h1 style="text-align: center;">Edited Profile Account</h1>

                <label for="new_nama"><strong>Name:</strong></label>
                <input type="text" name="nama" required placeholder="Enter Your Full Name" value="{{ user_data.nama }}">

                <label for="new_status"><strong>Status:</strong></label>
                <input type="text" name="status" required placeholder="Enter Your Status" value="{{ user_data.status }}">

                <label for="new_nim_nip"><strong>NIM/NIP:</strong></label>
                <input type="text" name="nim_nip" required placeholder="Enter Your NIM/NIP" value="{{ user_data.nim_nip }}">

               <!-- Display current username (non-editable) -->
                <label for="new_username"><strong>Username:</strong></label>
                <input type="text" value="{{ user_data[3] }}" readonly>
                
                <!-- Include a hidden input field for the form to submit the username -->
                <input type="hidden" name="username" value="{{ user_data[3] }}">
                
                <label for="old_password"><strong>Old Password:</strong></label>
                <input type="password" name="old_password" required placeholder="Enter Your Old Password">

                <!-- Display notification if old password is incorrect -->
                {% with messages = get_flashed_messages(category_filter='old_password_error') %}
                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert alert-danger" style="background-color: white; color: red;">
                                {{ message }}
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
                <label for="new_password"><strong>Password:</strong></label>
                <input type="password" name="password" required placeholder="Enter Your New Password">
        
                <label for="new_profile_picture"><strong>New Profile Picture:</strong></label>
                <input type="file" name="profile_picture">
                    {% with messages = get_flashed_messages(category_filter='profile_picture') %}
                        {% if messages %}
                            {% for message in messages %}
                                <div class="alert alert-danger">
                                    {{ message }}
                                </div>
                            {% endfor %}
                        {% endif %}
                    {% endwith %}
                
                <input type="submit" value="SAVE">
            </form>
        </div>
    </div>

    <!-- ... (kode lainnya) ... -->

    <footer>
        <p>&copy; 2023 Kelompok 4 TMJ 3B</p>
    </footer>
</body>
</html>